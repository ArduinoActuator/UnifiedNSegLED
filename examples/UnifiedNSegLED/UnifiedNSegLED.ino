#include "UnifiedNSegLED.h"


//#define USE_OSL12306_16
//#define USE_OSL20541
//#define USE_OSL30561
#define USE_GROVE_TM1637

#ifdef USE_OSL12306_16
#define OSL12306_16_PIN_2 22
#define OSL12306_16_PIN_3 23
#define OSL12306_16_PIN_4 24
#define OSL12306_16_PIN_5 25
#define OSL12306_16_PIN_6 26
#define OSL12306_16_PIN_7 27
#define OSL12306_16_PIN_8 28
#define OSL12306_16_PIN_9 29
#define OSL12306_16_PIN_10 30
#define OSL12306_16_PIN_11 31
#define OSL12306_16_PIN_12 32
#define OSL12306_16_PIN_13 33
#define OSL12306_16_PIN_14 34
#define OSL12306_16_PIN_15 35
#define OSL12306_16_PIN_16 36
#define OSL12306_16_PIN_17 37
#define OSL12306_16_PIN_18 38
#define OSL12306_16_PIN_19 39

#define OSL12306_16_PIN_A1 OSL12306_16_PIN_17
#define OSL12306_16_PIN_A2 OSL12306_16_PIN_14
#define OSL12306_16_PIN_B OSL12306_16_PIN_13
#define OSL12306_16_PIN_C OSL12306_16_PIN_9
#define OSL12306_16_PIN_D1 OSL12306_16_PIN_4
#define OSL12306_16_PIN_D2 OSL12306_16_PIN_7
#define OSL12306_16_PIN_E OSL12306_16_PIN_3
#define OSL12306_16_PIN_F OSL12306_16_PIN_19
#define OSL12306_16_PIN_G1 OSL12306_16_PIN_2
#define OSL12306_16_PIN_G2 OSL12306_16_PIN_12
#define OSL12306_16_PIN_J OSL12306_16_PIN_18
#define OSL12306_16_PIN_K OSL12306_16_PIN_16
#define OSL12306_16_PIN_L OSL12306_16_PIN_15
#define OSL12306_16_PIN_M OSL12306_16_PIN_8
#define OSL12306_16_PIN_N OSL12306_16_PIN_6
#define OSL12306_16_PIN_P OSL12306_16_PIN_5
#define OSL12306_16_PIN_DP OSL12306_16_PIN_10
#define OSL12306_16_PIN_DIGIT OSL12306_16_PIN_11


#define OSL12306_16_NUM_OF_PINS _OSL12306_16_CHAR_PINS
#define OSL12306_16_NUM_OF_DIGITS 1

uint8_t pins[OSL12306_16_NUM_OF_PINS] = {
  OSL12306_16_PIN_A1 , OSL12306_16_PIN_A2 , OSL12306_16_PIN_B , OSL12306_16_PIN_C , OSL12306_16_PIN_D1 , OSL12306_16_PIN_D2 , OSL12306_16_PIN_E , OSL12306_16_PIN_F , 
  OSL12306_16_PIN_G1 , OSL12306_16_PIN_G2 , OSL12306_16_PIN_J , OSL12306_16_PIN_K , OSL12306_16_PIN_L , OSL12306_16_PIN_M , OSL12306_16_PIN_N , OSL12306_16_PIN_P
};

uint8_t digitPins[OSL12306_16_NUM_OF_DIGITS] = {OSL12306_16_PIN_11};

OSL12306_16 __osl12306_16(
  ANODE_COMMON,
  pins,
  OSL12306_16_PIN_DP,
  OSL12306_16_NUM_OF_DIGITS,
  digitPins
);

UnifiedNSegLED osl12306_16(&__osl12306_16, OSL12306_16_TYPE);
#endif /* USE_OSL12306_16 */


#ifdef USE_OSL20541

#define OSL20541_PIN_1 34
#define OSL20541_PIN_2 35
//#define OSL20541_PIN_3 4
#define OSL20541_PIN_4 36
#define OSL20541_PIN_5 37
#define OSL20541_PIN_6 38
#define OSL20541_PIN_7 39
#define OSL20541_PIN_8 40
#define OSL20541_PIN_9 41
#define OSL20541_PIN_10 42
#define OSL20541_PIN_11 43
#define OSL20541_PIN_12 44
#define OSL20541_PIN_13 45
#define OSL20541_PIN_14 46
#define OSL20541_PIN_15 47
#define OSL20541_PIN_16 48
#define OSL20541_PIN_17 49
#define OSL20541_PIN_18 50

#define OSL20541_PIN_A OSL20541_PIN_12
#define OSL20541_PIN_B OSL20541_PIN_10
#define OSL20541_PIN_C OSL20541_PIN_9
#define OSL20541_PIN_D OSL20541_PIN_7
#define OSL20541_PIN_E OSL20541_PIN_1
#define OSL20541_PIN_F OSL20541_PIN_18
#define OSL20541_PIN_G1 OSL20541_PIN_13
#define OSL20541_PIN_G2 OSL20541_PIN_6
#define OSL20541_PIN_H OSL20541_PIN_17
#define OSL20541_PIN_J OSL20541_PIN_15
#define OSL20541_PIN_K OSL20541_PIN_14
#define OSL20541_PIN_L OSL20541_PIN_5
#define OSL20541_PIN_M OSL20541_PIN_4
#define OSL20541_PIN_N OSL20541_PIN_2
#define OSL20541_PIN_DP OSL20541_PIN_8
#define OSL20541_PIN_DIGIT_1 OSL20541_PIN_16
#define OSL20541_PIN_DIGIT_2 OSL20541_PIN_11


#define OSL20541_NUM_OF_DIGITS 2
#define OSL20541_NUM_OF_CHAR_PINS _OSL20541_CHAR_PINS

uint8_t osl20541_charPins[OSL20541_NUM_OF_CHAR_PINS] = {
  OSL20541_PIN_A,
  OSL20541_PIN_B,
  OSL20541_PIN_C,
  OSL20541_PIN_D,
  OSL20541_PIN_E,
  OSL20541_PIN_F,
  OSL20541_PIN_G1,
  OSL20541_PIN_G2,
  OSL20541_PIN_H,
  OSL20541_PIN_J,
  OSL20541_PIN_K,
  OSL20541_PIN_L,
  OSL20541_PIN_M,
  OSL20541_PIN_N
};
uint8_t osl20541_digitPins[OSL20541_NUM_OF_DIGITS] = {OSL20541_PIN_DIGIT_1, OSL20541_PIN_DIGIT_2};

OSL20541 __osl20541(
  ANODE_COMMON,
  osl20541_charPins,
  OSL20541_PIN_DP,
  OSL20541_NUM_OF_DIGITS,
  osl20541_digitPins
);

UnifiedNSegLED osl20541(&__osl20541, OSL20541_TYPE);
#endif /* USE_OSL20541 */

#ifdef USE_OSL30561

#define OSL30561_PIN_1 26
#define OSL30561_PIN_2 25
#define OSL30561_PIN_3 29
#define OSL30561_PIN_4 24
#define OSL30561_PIN_5 28
//
#define OSL30561_PIN_7 23
#define OSL30561_PIN_8 30
#define OSL30561_PIN_9 31
#define OSL30561_PIN_10 27
#define OSL30561_PIN_11 22
#define OSL30561_PIN_12 32

#define OSL30561_PIN_A OSL30561_PIN_11
#define OSL30561_PIN_B OSL30561_PIN_7
#define OSL30561_PIN_C OSL30561_PIN_4
#define OSL30561_PIN_D OSL30561_PIN_2
#define OSL30561_PIN_E OSL30561_PIN_1
#define OSL30561_PIN_F OSL30561_PIN_10
#define OSL30561_PIN_G OSL30561_PIN_5
#define OSL30561_PIN_DP OSL30561_PIN_3
#define OSL30561_PIN_DIGIT_1 OSL30561_PIN_12
#define OSL30561_PIN_DIGIT_2 OSL30561_PIN_9
#define OSL30561_PIN_DIGIT_3 OSL30561_PIN_8

#define OSL30561_NUM_OF_DIGITS 3

uint8_t osl30561_digitPins[OSL30561_NUM_OF_DIGITS] = {OSL30561_PIN_DIGIT_1, OSL30561_PIN_DIGIT_2, OSL30561_PIN_DIGIT_3};

OSL30561 __osl30561(
  OSL30561_TYPE_ANODE_COMMON,
  OSL30561_PIN_A,
  OSL30561_PIN_B,
  OSL30561_PIN_C,
  OSL30561_PIN_D,
  OSL30561_PIN_E,
  OSL30561_PIN_F,
  OSL30561_PIN_G,
  OSL30561_PIN_DP,
  OSL30561_NUM_OF_DIGITS,
  osl30561_digitPins
);

UnifiedNSegLED osl30561(&__osl30561, OSL30561_TYPE);
#endif /* USE_OSL30561 */

#ifdef USE_GROVE_TM1637
#define CLK 2//pins definitions for TM1637 and can be changed to other ports
#define DIO 3
TM1637 __tm1637(CLK,DIO);
UnifiedNSegLED tm1637(&__tm1637, GROVE_TM1637_TYPE);
#endif /* USE_GROVE_TM1637 */

void setup() {
  Serial.begin(9600);
  while (!Serial) {
    ;
  }

#ifdef USE_OSL12306_16
  osl12306_16.begin();
  osl12306_16.clear();
  char str[1] = {'9'};
  osl12306_16.display(0, str);
#endif /* USE_OSL12306_16 */

#ifdef USE_OSL20541
  osl20541.begin();
  osl20541.clear();
#endif /* USE_OSL20541 */

#ifdef USE_OSL30561
  osl30561.begin();
  osl30561.clear();
#endif /* USE_OSL30561 */

#ifdef USE_GROVE_TM1637
  tm1637.begin();
  tm1637.clear();
  tm1637.set(BRIGHT_TYPICAL);//BRIGHT_TYPICAL = 2,BRIGHT_DARKEST = 0,BRIGHTEST = 7;
  tm1637.setColomn(true);
#endif /* USE_GROVE_TM1637 */

}

void loop() {
#ifdef USE_OSL20541
  char osl20541_str[2] = {'a', 'b'};
  osl20541.display(0b11, osl20541_str);
#endif /* USE_OSL20541 */

#ifdef USE_OSL30561
  char osl30561_str[3] = {'a', 'b', 'c'};
  osl30561.display(0b101, osl30561_str);
#endif /* USE_OSL30561 */

#ifdef USE_GROVE_TM1637
  char tm1637_str[4] = {'a', 'b', 0, 'c'};
  tm1637.display(tm1637_str);
#endif /* USE_GROVE_TM1637 */

}
